---
title: "Aquamaps plots"
output:
  html_document: 
    keep_md: no
    toc: yes
    toc_float: yes
  pdf_document:
    toc: yes
---

```{r setup, include="FALSE"}
#'========================================================================
# Aquamaps_plots
#'========================================================================
#
# by Mark R Payne
# DTU-Aqua, Kgs. Lyngby, Denmark
# http://www.staff.dtu.dk/mpay
#
# Created Mon Aug 19 10:42:38 2019
#
# <Description>
#
# This work is subject to a Creative Commons "Attribution" "ShareALike" License.
# You are largely free to do what you like with it, so long as you "attribute"
# me for my contribution. See the fine print at the end for exact details.
#
# To do:
#
# Notes:
#
#'========================================================================

#Notes:
#Make sure when knitting that you have the Knit directory set to "project directory"

#Clean plate
rm(list=ls())

#Configure Knitr
knitr::opts_chunk$set(
  echo=FALSE,
	error = FALSE,
	message = FALSE,
	warning = FALSE,
	include = TRUE,
	results = "markup",
	fig.width = 10,
	fig.height=14/25*10,
  fig.align="center",
  fig.path=file.path(".","figures","Aquamaps_plots_"))

#Powerpoint needs 14 x 25cm figures

# knitr::opts_knit$set(
#    root.dir="..")

library(tidyverse)
library(ggplot2)
library(tibble)
library(viridisLite)
library(here)
library(knitrProgressBar)

theme_set(theme_bw(base_size = 14))
```

```{r}
#==========================================================================
# Configure ####
#==========================================================================

```

by Mark R Payne  <br>
DTU-Aqua, Kgs. Lyngby, Denmark  <br>
http://www.staff.dtu.dk/mpay  <br>
Mon Aug 19 10:42:38 2019

Plots of the imported Aquamaps by species


```{r results="asis"}
# Import data
dat.l <- readRDS(here("objects/Aquamaps/Aquamaps.rds")) 

dat <- 
  tibble(dat=dat.l) %>%
  mutate(sciname= map_chr(dat, ~.x$scientific.name)) %>%
  arrange(sciname)

pb <- progress_estimated(nrow(dat))
for(d in dat$dat) {
  n <- sprintf("%s (%s)",d$common.name,d$scientific.name)
  cat(sprintf("\n\n## %s\n",n))

  g <- 
    ggplot(d$map,aes(Center.Long,Center.Lat,colour=Overall.Probability))+
    annotation_map(map_data("world"),fill="black")+
    scale_colour_viridis_c()+
    geom_point()+
    coord_quickmap()+
    labs(title=n)+
    theme_bw()
  print(g)

  
  update_progress(pb)
}

```







***
*This work by Mark R Payne is licensed under a  Creative Commons
Attribution-NonCommercial-ShareAlike 3.0 Unported License. 
For details, see http://creativecommons.org/licenses/by-nc-sa/3.0/deed.en_US
Basically, this means that you are free to "share" and "remix" for 
non-commerical purposes as you see fit, so long as you "attribute" me for my
contribution. Derivatives can be distributed under the same or 
similar license.*

*This work comes with ABSOLUTELY NO WARRANTY or support.*

***



